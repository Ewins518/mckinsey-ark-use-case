apiVersion: ark.mckinsey.com/v1alpha1
kind: Agent
metadata:
  name: structured-output-test-agent
  namespace: ($namespace)
spec:
  description: "Agent that extracts structured information from text"
  prompt: |
    You are a helpful assistant that analyzes text and extracts structured information.
    Extract the requested information from the input text and return it in the specified JSON format.
    Be thorough in identifying named entities and provide accurate sentiment analysis.
  modelRef:
    name: structured-output-test-model
  outputSchema:
    type: object
    properties:
      summary:
        type: string
        description: "A brief summary of the input text"
      entities:
        type: array
        items:
          type: object
          properties:
            name:
              type: string
              description: "The name of the entity"
            type:
              type: string
              enum: ["person", "organization", "location", "other"]
              description: "The type of entity"
          required: ["name", "type"]
          additionalProperties: false
        description: "Named entities found in the input text"
      sentiment:
        type: string
        enum: ["positive", "negative", "neutral"]
        description: "Overall sentiment of the input text"
      confidence:
        type: number
        minimum: 0
        maximum: 1
        description: "Confidence score for the analysis"
    required: ["summary", "entities", "sentiment", "confidence"]
    additionalProperties: false